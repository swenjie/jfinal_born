(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1057"],{"3ydw":function(e,t,n){"use strict";var a=n("9Qo7");n.n(a).a},"9Qo7":function(e,t,n){},B2Fc:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"f",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u});var a=n("t3Un");function i(e){return Object(a.a)({url:"bi/taskCompleteStatistics",method:"post",data:e})}function l(e){return Object(a.a)({url:"bi/productStatistics",method:"post",data:e})}function r(e){return Object(a.a)({url:"bi/moneyStatistics",method:"post",data:e})}function s(e){return Object(a.a)({url:"bi/queryByMonth",method:"post",data:e})}function c(e){return Object(a.a)({url:"CrmCustomer/getUserCustomerAnalysis",method:"post",data:e})}function u(e){return Object(a.a)({url:"bi/funnelStatistics",method:"post",data:e})}},"y/eF":function(e,t,n){"use strict";n.r(t);var a=n("KTTK"),i=n("B2Fc"),l=(n("7Qib"),n("a/LZ")),r=n.n(l),s={name:"employee-statistics",components:{},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},loading:!1,tableHeight:document.documentElement.clientHeight-170,dateSelect:[],structuresProps:{children:"children",label:"label",value:"id"},deptList:[],structuresSelectValue:"",userOptions:[],userSelectValue:"",list:[],fieldList:[{field:"realname",name:"员工姓名"},{field:"customerNum",name:"客户数"},{field:"finishCustomerNum",name:"成交客户数"},{field:"finishCustomerR",name:"客户成交率(%)"},{field:"contractMoney",name:"合同总金额"},{field:"receivablesMoney",name:"回款金额"},{field:"unfinishReR",name:"未回款金额"},{field:"reFinishR",name:"回款完成率(%)"}]}},computed:{},mounted:function(){var e=this;window.onresize=function(){var t=document.documentElement.clientHeight;e.tableHeight=t-170};var t=r()(new Date).format("YYYY-MM-DD"),n=t.split("-"),a=n[0]+"-"+n[1]+"-01";this.dateSelect=[a,t],this.getDeptList()},methods:{getDataList:function(){var e=this;this.loading=!0,Object(i.c)({startTime:this.dateSelect[0],endTime:this.dateSelect[1],deptId:this.structuresSelectValue,userId:this.userSelectValue}).then(function(t){e.list=t.data,e.loading=!1}).catch(function(){e.loading=!1})},getDeptList:function(){var e=this;this.loading=!0,Object(a.b)().then(function(t){e.deptList=t.data,e.loading=!1,t.data.length>0&&(e.structuresSelectValue=t.data[0].id,e.getUserList(),e.getDataList())}).catch(function(){e.loading=!1})},structuresValueChange:function(e){this.userSelectValue="",this.userOptions=[],this.getUserList()},getUserList:function(){var e=this,t={pageType:0};t.deptId=this.structuresSelectValue,Object(a.i)(t).then(function(t){e.userOptions=t.data}).catch(function(){})},handleClick:function(e){"search"===e&&this.getDataList()}}},c=(n("3ydw"),n("ZrdR")),u=Object(c.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-container"},[n("div",{staticClass:"handle-bar"},[n("el-date-picker",{attrs:{type:"daterange",clearable:!1,"range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateSelect,callback:function(t){e.dateSelect=t},expression:"dateSelect"}}),e._v(" "),n("el-select",{attrs:{placeholder:"选择部门"},on:{change:e.structuresValueChange},model:{value:e.structuresSelectValue,callback:function(t){e.structuresSelectValue=t},expression:"structuresSelectValue"}},e._l(e.deptList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),n("el-select",{attrs:{clearable:!0,placeholder:"选择员工"},model:{value:e.userSelectValue,callback:function(t){e.userSelectValue=t},expression:"userSelectValue"}},e._l(e.userOptions,function(e){return n("el-option",{key:e.userId,attrs:{label:e.realname,value:e.userId}})})),e._v(" "),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.handleClick("search")}}},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"content"},[n("el-table",{attrs:{data:e.list,height:e.tableHeight,stripe:"",border:"","highlight-current-row":""}},e._l(e.fieldList,function(e,t){return n("el-table-column",{key:t,attrs:{align:"center","header-align":"center","show-overflow-tooltip":"",prop:e.field,label:e.name}})}))],1)])},[],!1,null,"77739457",null);u.options.__file="EmployeeStatistics.vue";t.default=u.exports}}]);